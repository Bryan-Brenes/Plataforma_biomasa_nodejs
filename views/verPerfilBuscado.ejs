
<div class="row" >
    <div class="col s2 green lighten-5 mainContainer" style="height: 110vh!important;">
        <div class="row">
            <div class="col s12 center-align">
                <img class="circle fotoPerfil" src="/assets/generic_user_pic.jpg" alt="imagen de prefil">
            </div>
            <div class="col s12 center-align">
                <h6><%= typeof nombre != 'undefined' ? nombre : '' %></h6>
            </div>
            <div class="col s12">
                <hr>
            </div>
            <div class="row sideNavBtnContainer">
                <button onclick="cambiarPantalla('main')" class="btn btn-large waves-effect col s12 sideNavBtn green lighten-5" style="margin-top: 40px;">Ver perfil</button>
                <button onclick="cambiarPantalla('busquedas')" class="btn btn-large waves-effect col s12 sideNavBtn green lighten-3">Buscar perfiles</button>
                <button onclick="cambiarPantalla('chat')" class="btn btn-large waves-effect col s12 sideNavBtn green lighten-5">Chat</button>
                <button onclick="cambiarPantalla('index')" class="btn btn-large waves-effect col s12 sideNavBtn red lighten-3 btn_cerrarSesion" style="margin-top: 320px;">Cerrar sesión</button>
            </div>
        </div>
        <div class="col s12 full-heigth-3">

        </div>
    </div>
    <div class="col s10 mainContainer">
        <div class="container" style="margin-top: 5%;">
            <div class="row">
                <div class="col s4 center-align">
                    <img src="/assets/generic_user_pic.jpg" alt="foto de perfil usuario" class="responsive-img">
                </div>
                <div class="col s8 userInfo">
                    <div class="row">
                        <div class="col s12">
                            <h3 style="font-size: 2vw; margin: 17px 0;"><%= typeof cliente.nombre != 'undefined' ? cliente.nombre : 'Error: cliente no encontrado' %></h3>
                        </div>
                        <div class="col s12">
                            <p><b><%= typeof cliente.rol != 'undefined' ? cliente.rol : '' %></b></p>
                        </div>
                        <div class="col s12">
                            <p><b>Capacidad: </b> <%= typeof cliente.capacidad != 'undefined' ? cliente.capacidad : '' %> kg </p>
                        </div>
                        <div class="col s12">
                            <p><b>Información de contacto</b></p>
                            <div class="row reset-margin-padding">
                                <p><b>Email: </b><%= typeof cliente.id != 'undefined' ? cliente.id : '' %></p>
                                <p><b>Teléfono: </b><%= typeof cliente.telefono != 'undefined' ? cliente.telefono : '' %></p>
                                <p><b>Sitio web: </b><%= typeof cliente.paginaWeb != 'undefined' ? cliente.paginaWeb : '' %></p>
                            </div>
                        </div>
                        <div class="col s12">
                            <p><b>Dirección</b></p>
                        </div>
                        <div class="col s12">
                            <p><%= typeof cliente.direccion != 'undefined' ? cliente.direccion : '' %></p>
                        </div>
                    </div>
                    <div class="row">
                        <a class="col s3 waves-effect waves-light btn modal-trigger" href="#modal1">Enviar email</a>
                        <a class="col s3 offset-s1 waves-effect waves-light btn" href="/authUsuarios/chatConversacion">Enviar mensaje</a>
                    </div>
                </div>
            </div>
            <div class="row">
                <% if((cliente.mision != 'undefined' && cliente.mision != '')) {%>
                <div class="col s6 center-align">
                    <div class="row">
                        <div class="col s12">
                            <h5>Misión</h5>
                            <hr>
                        </div>
                        <div class="col s12">
                            <p>
                                <%= typeof cliente.mision != 'undefined' ? cliente.mision : '' %>
                            </p>
                        </div>
                    </div>
                
                </div>
                <%}%>
                <% if((cliente.vision != 'undefined' && cliente.vision != '')) {%>
                <div class="col s6 center-align">
                    <div class="col s12">
                        <h5>Visión</h5>
                        <hr>
                    </div>
                    <div class="col s12">
                        <p>
                            <%= typeof cliente.vision != 'undefined' ? cliente.vision : '' %>
                        </p>
                    </div>
                </div>
                <%}%>
            </div>
            <div class="row">
                <div class="col s12">
                    <img src="/assets/mapa_test.png" alt="Mapa con la ubicación del usuario" class="responsive-img">
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Structure -->
<div id="modal1" class="modal">
    <div class="modal-content" style="height: 400px;">
        <h4>Enviar email</h4>
        <div class="row">
            <div class="input-field col s12">
                <input type="text" id="asunto" name="asunto">
                <label for="asunto">Asunto</label>
            </div>
            <div class="input-field col s12">
                <textarea class="materialize-textarea" name="cuerpoEmail" id="cuerpoEmail" cols="30" rows="10"></textarea>
                <label for="cuerpoEmail">Cuerpo del email</label>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="modal-action modal-close btn wave-effects grey lighten-1">Cancelar</button>
        <button onclick="enviarEmail()" class="modal-action modal-close btn wave-effects">Enviar</button>
        
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('.modal');
        var instances = M.Modal.init(elems, {});
    });

    function enviarEmail(){
        var cuerpoEmail = document.getElementById('cuerpoEmail').value;
        var asunto = document.getElementById('asunto').value;
         
        if( cuerpoEmail === '' || asunto === ''){
            alert('Por favor no dejar espacion vacíos')
        } else {
            alert('Mensaje enviado');
        }
        
    }

    function cambiarPantalla(ventana){
        if (ventana === 'index'){
            window.location.href = "/";
        } else if(ventana === 'busquedas'){
            window.location.href = '/authUsuarios/busquedas';
        } else if(ventana === 'main'){
            window.location.href = '/authUsuarios/main';
        } else if (ventana === 'chat'){
            window.location.href = '/authUsuarios/chat';
        }  
    }
</script>